<!DOCTYPE html>
<html lang="en-US">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Karl D. Lerud, Ph.D. | Auditory perception: Stimulus design and analysis</title>
<meta name="generator" content="Jekyll v4.2.1">
<meta property="og:title" content="Karl D. Lerud, Ph.D.">
<meta property="og:locale" content="en_US">
<meta name="description" content="Auditory perception: Stimulus design and analysis">
<meta property="og:description" content="Auditory perception: Stimulus design and analysis">
<meta property="og:site_name" content="Karl D. Lerud, Ph.D.">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="Karl D. Lerud, Ph.D.">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Auditory perception: Stimulus design and analysis","headline":"Karl D. Lerud, Ph.D.","url":"/basicSinAutomate.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
    <script src="/assets/js/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="/assets/css/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup theme-color -->
<!-- start theme color meta headers -->
<meta name="theme-color" content="#353535">
<meta name="msapplication-navbutton-color" content="#353535">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- end theme color meta headers -->


<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
      <div id="header">
        <nav>
          <ul>
            <li class="fork"><a href="https://github.com/lerud/lerud.github.io/">View On GitHub</a></li>
            
              <li class="downloads"><a href="https://github.com/lerud/lerud.github.io/archive/refs/heads/master.zip">ZIP</a></li>
              <li class="downloads"><a href="https://github.com/lerud/lerud.github.io/tarball/master">TAR</a></li>
              <li class="title">DOWNLOADS</li>
            
          </ul>
        </nav>
      </div>
<!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Karl D. Lerud, Ph.D.</h1>
          <p>Auditory perception: Stimulus design and analysis</p>
	  <p><a href="./index.html">Home</a>
          </p>
<hr>
          <span class="credits left">Project maintained by <a href="https://github.com/lerud/">lerud</a></span>
          <span class="credits right">Hosted on GitHub Pages — Theme by <a href="https://twitter.com/mattgraham">mattgraham</a></span>
        </div>

        <p>In this example it is shown that one can “automate” frequency and amplitude (of the carrier, as well as the modulators, as is shown in a different example). By automate, we mean that there can be multiple values for a given frequency component, of frequency and/or amplitude, rather than just one. If there is more than one value given, then the values that are given are linearly interpolated to the length of the frequency component. So if the frequency is given as <code class="language-plaintext highlighter-rouge">{[100 200]}</code>, it will simply start at 100 Hz and end at 200 Hz, moving continuously up over then length of the entire time span. If something more complicated is given, such as <code class="language-plaintext highlighter-rouge">{[linspace(100,100,100) linspace(100,200,100) linspace(200,200,100)]}</code>, then this frequency component would stay at 100 Hz for the first roughly third of the time span, then linearly move from 100 to 200 Hz over the next third, then stay at 200 Hz for the remaining third.</p>

<p>To input automated values, the input variable needs to be a cell array rather than a matrix. The cell array then has the same structure as the matrix would, with the first dimension corresponding to time spans, and the second dimension to frequency components. Each value in the cell array is a vector of values to interpolate. In the below example, both carrier frequency and amplitude are automated. The frequency starts at 300 Hz for roughly the first third, then moves pretty quickly from there to 1,000 Hz for another third, and comes back down to 300 Hz for the remaining third. The carrier amplitude simply starts at 3 and moves steadily down to 0.5 over the course of the entire time span.</p>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">% Some plotting parameters</span>
<span class="n">colorRatio</span><span class="o">=.</span><span class="mi">67</span><span class="p">;</span>
<span class="n">NFFT</span><span class="o">=</span><span class="mi">8192</span><span class="o">*</span><span class="mi">4</span><span class="p">;</span>
<span class="n">specFreqPerc</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span> <span class="mi">7</span><span class="p">];</span>
<span class="n">specWindowLength</span><span class="o">=</span><span class="mi">5000</span><span class="p">;</span>
<span class="n">autoFreqPerc</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span> <span class="mi">30</span><span class="p">];</span>
<span class="n">xTimes</span><span class="o">=</span><span class="p">[</span><span class="mf">1.3</span> <span class="mf">1.4</span><span class="p">];</span>

<span class="c1">% Stimulus parameters</span>
<span class="n">tSpans</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span> <span class="mi">2</span><span class="p">];</span>
<span class="n">fs</span><span class="o">=</span><span class="mi">44100</span><span class="p">;</span>
<span class="n">carWaves</span><span class="o">=</span><span class="p">{</span><span class="s1">'sin'</span><span class="p">};</span>
<span class="n">carFreqs</span><span class="o">=</span><span class="p">{[</span><span class="nb">ones</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1000</span><span class="p">)</span><span class="o">*</span><span class="mi">300</span> <span class="nb">linspace</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span><span class="mi">1000</span><span class="p">,</span><span class="mi">70</span><span class="p">)</span> <span class="nb">ones</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1000</span><span class="p">)</span><span class="o">*</span><span class="mi">1000</span> <span class="nb">linspace</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span><span class="mi">300</span><span class="p">,</span><span class="mi">70</span><span class="p">)</span> <span class="nb">ones</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1000</span><span class="p">)</span><span class="o">*</span><span class="mi">300</span><span class="p">]};</span>
<span class="n">carAmps</span><span class="o">=</span><span class="p">{[</span><span class="mi">3</span> <span class="o">.</span><span class="mi">5</span><span class="p">]};</span>
<span class="n">carThs</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>

<span class="c1">% Create stimulus structure</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">stimulusMake</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'fcn'</span><span class="p">,</span> <span class="n">tSpans</span><span class="p">,</span> <span class="n">fs</span><span class="p">,</span> <span class="n">carWaves</span><span class="p">,</span> <span class="n">carFreqs</span><span class="p">,</span> <span class="n">carAmps</span><span class="p">,</span> <span class="n">carThs</span><span class="p">);</span>

<span class="c1">% Do some visualization</span>
<span class="nb">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="nb">gcf</span><span class="p">,</span><span class="s1">'position'</span><span class="p">,[</span><span class="mi">50</span> <span class="mi">50</span> <span class="mi">1700</span> <span class="mi">1350</span><span class="p">])</span>

<span class="nb">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="p">[</span><span class="o">~</span><span class="p">,</span><span class="o">~</span><span class="p">,</span><span class="n">cbar</span><span class="p">]</span><span class="o">=</span><span class="n">mdlSpec</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">NFFT</span><span class="p">,</span><span class="n">s</span><span class="o">.</span><span class="n">fs</span><span class="p">,</span><span class="n">specFreqPerc</span><span class="p">,</span><span class="n">specWindowLength</span><span class="p">);</span>
<span class="nb">grid</span> <span class="n">on</span>
<span class="n">temp</span><span class="o">=</span><span class="nb">get</span><span class="p">(</span><span class="n">cbar</span><span class="p">,</span><span class="s1">'limits'</span><span class="p">);</span>
<span class="nb">colormap</span><span class="p">(</span><span class="s1">'jet'</span><span class="p">)</span>
<span class="n">totalRange</span><span class="o">=</span><span class="nb">diff</span><span class="p">(</span><span class="n">temp</span><span class="p">);</span>
<span class="n">cutoff</span><span class="o">=</span><span class="p">(</span><span class="n">colorRatio</span><span class="o">*</span><span class="n">totalRange</span><span class="p">)</span><span class="o">+</span><span class="n">temp</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="nb">caxis</span><span class="p">([</span><span class="n">cutoff</span> <span class="n">temp</span><span class="p">(</span><span class="mi">2</span><span class="p">)])</span>

<span class="nb">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">mdlAutocorr</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">s</span><span class="o">.</span><span class="n">fs</span><span class="p">,</span><span class="n">autoFreqPerc</span><span class="p">);</span>
<span class="nb">grid</span> <span class="n">on</span>

<span class="nb">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="nb">plot</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">t</span><span class="p">,</span><span class="n">s</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
<span class="nb">title</span><span class="p">(</span><span class="s1">'Total stimulus'</span><span class="p">)</span>
<span class="nb">xlabel</span><span class="p">(</span><span class="s1">'Time (sec)'</span><span class="p">)</span>
<span class="nb">ylabel</span><span class="p">(</span><span class="s1">'Amplitude (a.u.)'</span><span class="p">)</span>
<span class="nb">grid</span> <span class="n">on</span>
<span class="nb">zoom</span> <span class="n">xon</span>

<span class="nb">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="nb">plot</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">t</span><span class="p">,</span><span class="n">s</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="s1">'linewidth'</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">title</span><span class="p">(</span><span class="s1">'Stimulus portion'</span><span class="p">)</span>
<span class="nb">xlabel</span><span class="p">(</span><span class="s1">'Time (sec)'</span><span class="p">)</span>
<span class="nb">ylabel</span><span class="p">(</span><span class="s1">'Amplitude (a.u.)'</span><span class="p">)</span>
<span class="nb">xlim</span><span class="p">(</span><span class="n">xTimes</span><span class="p">)</span>
<span class="nb">grid</span> <span class="n">on</span>
<span class="nb">zoom</span> <span class="n">xon</span>
</code></pre></div></div>

<p><img src="pics/basicSinAutomate.png" alt=""></p>

<p><audio id="media-basicSinAutomate.mp3" class="media" src="sounds/basicSinAutomate.mp3" style="max-width: 600px;outline: none" controls> Your browser doesn't support HTML5 audio. Here is a <a href="sounds/basicSinAutomate.mp3">link to download the audio</a> instead.</audio></p>

<p><a href="stimuli.html"><center>Back to stimulus home</center></a></p>


      </section>

    </div>
  </body>
</html><!---<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>--->
